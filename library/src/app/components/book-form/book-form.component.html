<ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Add Book</h4>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form [formGroup]="bookForm" (ngSubmit)="onSubmit()" class="">
        <!-- Book Name -->
        <div class="mb-3">
          <label class="form-label">Book Name</label>
          <input type="text" class="form-control" formControlName="name" placeholder="Enter book name">
        </div>

        <!-- Image Upload -->
        <div class="mb-3">
          <label class="form-label">Image Upload</label>
          <input type="file" class="form-control" (change)="onFileChange($event)">
        </div>

        <!-- Rating (Ng-Bootstrap) -->
        <div class="mb-3">
          <label class="form-label">Rating</label>
          <ngb-rating formControlName="rating" [max]="maxRating"></ngb-rating>
        </div>

        <!-- Available Count -->
        <div class="mb-3">
          <label class="form-label">Available Count</label>
          <input type="number" class="form-control" formControlName="availableCount" min="1">
        </div>

        <!-- Book Details -->
      <div formGroupName="bookDetails" class="border p-3 mt-3">
        <h5>Book Details</h5>

        <!-- Details -->
        <div class="mb-3">
          <label class="form-label">Details</label>
          <textarea class="form-control" formControlName="details"></textarea>
        </div>

        <!-- Page Count -->
        <div class="mb-3">
          <label class="form-label">Pages</label>
          <input type="number" class="form-control" formControlName="page" />
        </div>

        <!-- Genres (Dynamic) -->
        <div class="mb-3">
          <label class="form-label">Genres</label>
          <br>
          <button type="button" class="btn btn-primary mb-2" (click)="addGenre()">Add Genre</button>
          <div formArrayName="genres">
            <div *ngFor="let genre of genres.controls; let i = index" class="d-flex align-items-center mb-2">
              <input type="text" class="form-control me-2" [formControlName]="i" placeholder="Enter genre" />
              <button type="button" class="btn btn-danger" (click)="removeGenre(i)">Remove</button>
            </div>
          </div>
          
        </div>
      </div>

      <!-- Author Section -->
    <div class="border p-3 mt-3">
      <h5>Author</h5>

      <!-- Choose Existing or New Author -->
      <div class="mb-3">
        <div class="form-check">
          <input class="form-check-input" type="radio" id="existingAuthor" formControlName="authorType" value="existing" (change)="updateAuthorType('existing')" />
          <label class="form-check-label" for="existingAuthor">Existing Author</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" id="newAuthor" formControlName="authorType" value="new" (change)="updateAuthorType('new')" />
          <label class="form-check-label" for="newAuthor">New Author</label>
        </div>
      </div>

      <!-- Existing Author Dropdown -->
      <div class="mb-3" *ngIf="authorType === 'existing'">
        <label class="form-label">Select Author</label>
        <select class="form-control" formControlName="existingAuthor">
          <option value="">-- Select an Author --</option>
          <option *ngFor="let author of existingAuthors" [value]="author.id">{{ author.fullName }}</option>
        </select>
      </div>

      <!-- New Author Fields -->
      <div formGroupName="newAuthor" *ngIf="authorType === 'new'">
        <div class="mb-3">
          <label class="form-label">First Name</label>
          <input type="text" class="form-control" formControlName="firstName" />
        </div>
        <div class="mb-3">
          <label class="form-label">Last Name</label>
          <input type="text" class="form-control" formControlName="lastName" />
        </div>
        <div class="mb-3">
          <label class="form-label">Birthday</label>
          <input type="date" class="form-control" formControlName="birthday" />
        </div>
      </div>
    </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" (click)="onSubmit()" [disabled]="!this.bookForm.valid">
        Save
      </button>
    </div>
</ng-template>
  <div>
    <button type="button"
            class="btn btn-outline-secondary"
            (click)="openDialogForNew()">New Book</button>
  </div>